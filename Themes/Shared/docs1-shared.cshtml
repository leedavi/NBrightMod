@inherits NBrightMod.render.NBrightModRazorTokens<NBrightDNN.NBrightRazor>
@using System.Linq
@using System
@using System.Web.UI.WebControls
@using System.Xml
@using NBrightDNN

@AddMetaData("resourcepath", "/DesktopModules/NBright/NBrightMod/App_LocalResources/")

@{
    var info = (NBrightInfo)Model.List.First();
}

<input id="xmlupdatedocs" type="hidden" value=""></input>

<div class="docinput panel panel-default">

    <div class="panel-heading clearfix">
	
       @EditButtons("uploaddoc,undodoc", "docbuttons pull-right")

      <span class="panel-title">@ResourceKey("Edit.documents")</span>
    </div>
    <div class="panel-body">

            <div id="docselectlist" style="display: none;"></div>

            <div class="table-responsive">

                                <table class="table" id="doclist">
                                <tr>
                                  <th>@ResourceKey("Edit.file")</th>
                                  <th>@ResourceKey("Edit.description")</th>
                                  <th>@ResourceKey("Edit.actions")</th>
                                </tr>

                @{
                    var doclp = 1;
                    foreach (XmlNode imgNod in info.XMLDoc.SelectNodes("genxml/docs/genxml"))
                    {
                        var docurl = info.GetXmlProperty("genxml/docs/genxml[" + doclp + "]/hidden/docurl");

                        <tr class="docitem">
                            @HiddenField(info, "genxml/docs/genxml[" + doclp + "]/hidden/ref", " update='docsave' ")
                            @HiddenField(info, "genxml/docs/genxml[" + doclp + "]/hidden/filename", " update='docsave' ")
                            @HiddenField(info, "genxml/docs/genxml[" + doclp + "]/hidden/docurl", " update='docsave' ")
                            @HiddenField(info, "genxml/docs/genxml[" + doclp + "]/hidden/docpath", " update='docsave' ")
                                    <td><a href="@(docurl)" target="_blank">@info.GetXmlProperty("genxml/docs/genxml[" + doclp + "]/hidden/filename")</a></td>
                                    <td>@NBrightTextBox(info, "genxml/lang/genxml/docs/genxml[" + doclp + "]/textbox/docdesc", " update='doclang' ")</td>
                                    <td>
                                      <button type="button" class="btn btn-sm btn-danger removedoc" docindex="@(doclp)" data-toggle="tooltip" data-placement="top" data-original-title="@ResourceKey("Edit.delete")"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                                      <button type="button" class="btn btn-sm sortelementUp" docindex="@(doclp)" data-toggle="tooltip" data-placement="top" data-original-title="@ResourceKey("Edit.moveup")"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>
                                      <button type="button" class="btn btn-sm sortelementDown" docindex="@(doclp)" data-toggle="tooltip" data-placement="top" data-original-title="@ResourceKey("Edit.movedown")"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
                                    </td>
                        </tr>

                        doclp += 1;
                    }
                }

                              </table>

            </div>
    </div>

</div>

